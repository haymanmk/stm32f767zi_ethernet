ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"lwip_tcp_server.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.tcp_server_accept,"ax",%progbits
  17              		.align	1
  18              		.arch armv7e-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-d16
  24              	tcp_server_accept:
  25              	.LVL0:
  26              	.LFB168:
  27              		.file 1 "Core/Src/lwip_tcp_server.c"
   1:Core/Src/lwip_tcp_server.c **** #include "lwip_tcp_server.h"
   2:Core/Src/lwip_tcp_server.c **** 
   3:Core/Src/lwip_tcp_server.c **** void tcp_server_init(void)
   4:Core/Src/lwip_tcp_server.c **** {
   5:Core/Src/lwip_tcp_server.c ****     struct tcp_pcb *pcb;
   6:Core/Src/lwip_tcp_server.c ****     err_t err;
   7:Core/Src/lwip_tcp_server.c **** 
   8:Core/Src/lwip_tcp_server.c ****     /* Create a new TCP control block  */
   9:Core/Src/lwip_tcp_server.c ****     pcb = tcp_new();
  10:Core/Src/lwip_tcp_server.c **** 
  11:Core/Src/lwip_tcp_server.c ****     if (pcb != NULL)
  12:Core/Src/lwip_tcp_server.c ****     {
  13:Core/Src/lwip_tcp_server.c ****         /* Bind pcb to port 8500 */
  14:Core/Src/lwip_tcp_server.c ****         // ip_addr_t ipaddr;
  15:Core/Src/lwip_tcp_server.c ****         // IP_ADDR4(&ipaddr, 172, 16, 0, 10);
  16:Core/Src/lwip_tcp_server.c ****         // err = tcp_bind(pcb, &ipaddr, 8500);
  17:Core/Src/lwip_tcp_server.c ****         err = tcp_bind(pcb, IP4_ADDR_ANY, 8500);
  18:Core/Src/lwip_tcp_server.c **** 
  19:Core/Src/lwip_tcp_server.c ****         if (err == ERR_OK)
  20:Core/Src/lwip_tcp_server.c ****         {
  21:Core/Src/lwip_tcp_server.c ****             /* Put the TCP connection into LISTEN state */
  22:Core/Src/lwip_tcp_server.c ****             pcb = tcp_listen(pcb);
  23:Core/Src/lwip_tcp_server.c **** 
  24:Core/Src/lwip_tcp_server.c ****             /* Initialize LwIP tcp_accept callback function */
  25:Core/Src/lwip_tcp_server.c ****             tcp_accept(pcb, tcp_server_accept);
  26:Core/Src/lwip_tcp_server.c ****         }
  27:Core/Src/lwip_tcp_server.c ****         else
  28:Core/Src/lwip_tcp_server.c ****         {
  29:Core/Src/lwip_tcp_server.c ****             /* deallocate the PCB */
  30:Core/Src/lwip_tcp_server.c ****             memp_free(MEMP_TCP_PCB, pcb);
  31:Core/Src/lwip_tcp_server.c ****         }
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 2


  32:Core/Src/lwip_tcp_server.c ****     }
  33:Core/Src/lwip_tcp_server.c **** }
  34:Core/Src/lwip_tcp_server.c **** 
  35:Core/Src/lwip_tcp_server.c **** static err_t tcp_server_accept(void *arg, struct tcp_pcb *newpcb, err_t err)
  36:Core/Src/lwip_tcp_server.c **** {
  28              		.loc 1 36 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 36 1 is_stmt 0 view .LVU1
  33 0000 38B5     		push	{r3, r4, r5, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 3, -16
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 14, -4
  40 0002 0C46     		mov	r4, r1
  37:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
  41              		.loc 1 37 5 is_stmt 1 view .LVU2
  38:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
  42              		.loc 1 38 5 view .LVU3
  39:Core/Src/lwip_tcp_server.c **** 
  40:Core/Src/lwip_tcp_server.c ****     LWIP_UNUSED_ARG(arg);
  43              		.loc 1 40 5 view .LVU4
  41:Core/Src/lwip_tcp_server.c ****     LWIP_UNUSED_ARG(err);
  44              		.loc 1 41 5 view .LVU5
  42:Core/Src/lwip_tcp_server.c **** 
  43:Core/Src/lwip_tcp_server.c ****     /* Set priority for the newly accepted tcp connection newpcb */
  44:Core/Src/lwip_tcp_server.c ****     tcp_setprio(newpcb, TCP_PRIO_MIN);
  45              		.loc 1 44 5 view .LVU6
  46 0004 0121     		movs	r1, #1
  47              	.LVL1:
  48              		.loc 1 44 5 is_stmt 0 view .LVU7
  49 0006 2046     		mov	r0, r4
  50              	.LVL2:
  51              		.loc 1 44 5 view .LVU8
  52 0008 FFF7FEFF 		bl	tcp_setprio
  53              	.LVL3:
  45:Core/Src/lwip_tcp_server.c **** 
  46:Core/Src/lwip_tcp_server.c ****     /* Allocate structure es to maintain tcp connection information */
  47:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)mem_malloc(sizeof(struct tcp_server_struct));
  54              		.loc 1 47 5 is_stmt 1 view .LVU9
  55              		.loc 1 47 38 is_stmt 0 view .LVU10
  56 000c 0C20     		movs	r0, #12
  57 000e FFF7FEFF 		bl	mem_malloc
  58              	.LVL4:
  48:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
  59              		.loc 1 48 5 is_stmt 1 view .LVU11
  60              		.loc 1 48 8 is_stmt 0 view .LVU12
  61 0012 C0B1     		cbz	r0, .L3
  62 0014 0146     		mov	r1, r0
  49:Core/Src/lwip_tcp_server.c ****     {
  50:Core/Src/lwip_tcp_server.c ****         es->state = ES_ACCEPTED;
  63              		.loc 1 50 9 is_stmt 1 view .LVU13
  64              		.loc 1 50 19 is_stmt 0 view .LVU14
  65 0016 0123     		movs	r3, #1
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 3


  66 0018 0370     		strb	r3, [r0]
  51:Core/Src/lwip_tcp_server.c ****         es->pcb = newpcb;
  67              		.loc 1 51 9 is_stmt 1 view .LVU15
  68              		.loc 1 51 17 is_stmt 0 view .LVU16
  69 001a 4460     		str	r4, [r0, #4]
  52:Core/Src/lwip_tcp_server.c ****         es->retries = 0;
  70              		.loc 1 52 9 is_stmt 1 view .LVU17
  71              		.loc 1 52 21 is_stmt 0 view .LVU18
  72 001c 0025     		movs	r5, #0
  73 001e 4570     		strb	r5, [r0, #1]
  53:Core/Src/lwip_tcp_server.c ****         es->p = NULL;
  74              		.loc 1 53 9 is_stmt 1 view .LVU19
  75              		.loc 1 53 15 is_stmt 0 view .LVU20
  76 0020 8560     		str	r5, [r0, #8]
  54:Core/Src/lwip_tcp_server.c **** 
  55:Core/Src/lwip_tcp_server.c ****         /* pass newly allocated es structure as argument to newpcb */
  56:Core/Src/lwip_tcp_server.c ****         tcp_arg(newpcb, es);
  77              		.loc 1 56 9 is_stmt 1 view .LVU21
  78 0022 2046     		mov	r0, r4
  79              	.LVL5:
  80              		.loc 1 56 9 is_stmt 0 view .LVU22
  81 0024 FFF7FEFF 		bl	tcp_arg
  82              	.LVL6:
  57:Core/Src/lwip_tcp_server.c **** 
  58:Core/Src/lwip_tcp_server.c ****         /* initialize lwip tcp_recv callback function for newpcb  */
  59:Core/Src/lwip_tcp_server.c ****         tcp_recv(newpcb, tcp_server_recv);
  83              		.loc 1 59 9 is_stmt 1 view .LVU23
  84 0028 0849     		ldr	r1, .L5
  85 002a 2046     		mov	r0, r4
  86 002c FFF7FEFF 		bl	tcp_recv
  87              	.LVL7:
  60:Core/Src/lwip_tcp_server.c **** 
  61:Core/Src/lwip_tcp_server.c ****         /* initialize lwip tcp_err callback function for newpcb  */
  62:Core/Src/lwip_tcp_server.c ****         tcp_err(newpcb, tcp_server_error);
  88              		.loc 1 62 9 view .LVU24
  89 0030 0749     		ldr	r1, .L5+4
  90 0032 2046     		mov	r0, r4
  91 0034 FFF7FEFF 		bl	tcp_err
  92              	.LVL8:
  63:Core/Src/lwip_tcp_server.c **** 
  64:Core/Src/lwip_tcp_server.c ****         /* initialize lwip tcp_poll callback function for newpcb */
  65:Core/Src/lwip_tcp_server.c ****         tcp_poll(newpcb, tcp_server_poll, 0);
  93              		.loc 1 65 9 view .LVU25
  94 0038 2A46     		mov	r2, r5
  95 003a 0649     		ldr	r1, .L5+8
  96 003c 2046     		mov	r0, r4
  97 003e FFF7FEFF 		bl	tcp_poll
  98              	.LVL9:
  66:Core/Src/lwip_tcp_server.c **** 
  67:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
  99              		.loc 1 67 9 view .LVU26
 100              		.loc 1 67 17 is_stmt 0 view .LVU27
 101 0042 2846     		mov	r0, r5
 102              	.LVL10:
 103              	.L2:
  68:Core/Src/lwip_tcp_server.c ****     }
  69:Core/Src/lwip_tcp_server.c ****     else
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 4


  70:Core/Src/lwip_tcp_server.c ****     {
  71:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_MEM;
  72:Core/Src/lwip_tcp_server.c ****     }
  73:Core/Src/lwip_tcp_server.c **** 
  74:Core/Src/lwip_tcp_server.c ****     return ret_err;
 104              		.loc 1 74 5 is_stmt 1 view .LVU28
  75:Core/Src/lwip_tcp_server.c **** }
 105              		.loc 1 75 1 is_stmt 0 view .LVU29
 106 0044 38BD     		pop	{r3, r4, r5, pc}
 107              	.LVL11:
 108              	.L3:
  71:Core/Src/lwip_tcp_server.c ****     }
 109              		.loc 1 71 17 view .LVU30
 110 0046 4FF0FF30 		mov	r0, #-1
 111              	.LVL12:
  71:Core/Src/lwip_tcp_server.c ****     }
 112              		.loc 1 71 17 view .LVU31
 113 004a FBE7     		b	.L2
 114              	.L6:
 115              		.align	2
 116              	.L5:
 117 004c 00000000 		.word	tcp_server_recv
 118 0050 00000000 		.word	tcp_server_error
 119 0054 00000000 		.word	tcp_server_poll
 120              		.cfi_endproc
 121              	.LFE168:
 123              		.section	.text.tcp_server_send,"ax",%progbits
 124              		.align	1
 125              		.syntax unified
 126              		.thumb
 127              		.thumb_func
 128              		.fpu fpv5-d16
 130              	tcp_server_send:
 131              	.LVL13:
 132              	.LFB173:
  76:Core/Src/lwip_tcp_server.c **** 
  77:Core/Src/lwip_tcp_server.c **** static err_t tcp_server_recv(void *arg, struct tcp_pcb *pcb, struct pbuf *p, err_t err)
  78:Core/Src/lwip_tcp_server.c **** {
  79:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
  80:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
  81:Core/Src/lwip_tcp_server.c **** 
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
  83:Core/Src/lwip_tcp_server.c **** 
  84:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)arg;
  85:Core/Src/lwip_tcp_server.c **** 
  86:Core/Src/lwip_tcp_server.c ****     /* if we receive an empty tcp frame from client, close the connection */
  87:Core/Src/lwip_tcp_server.c ****     if (p == NULL)
  88:Core/Src/lwip_tcp_server.c ****     {
  89:Core/Src/lwip_tcp_server.c ****         /* remote host closed connection */
  90:Core/Src/lwip_tcp_server.c ****         es->state = ES_CLOSING;
  91:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
  92:Core/Src/lwip_tcp_server.c ****         {
  93:Core/Src/lwip_tcp_server.c ****             /* we're done sending, close it */
  94:Core/Src/lwip_tcp_server.c ****             tcp_server_close(pcb, es);
  95:Core/Src/lwip_tcp_server.c ****         }
  96:Core/Src/lwip_tcp_server.c ****         else
  97:Core/Src/lwip_tcp_server.c ****         {
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 5


  98:Core/Src/lwip_tcp_server.c ****             /* we're not done yet */
  99:Core/Src/lwip_tcp_server.c ****             /* acknowledge received packet */
 100:Core/Src/lwip_tcp_server.c ****             tcp_sent(pcb, tcp_server_sent);
 101:Core/Src/lwip_tcp_server.c ****             /* send remaining data */
 102:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 103:Core/Src/lwip_tcp_server.c ****         }
 104:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 105:Core/Src/lwip_tcp_server.c ****     }
 106:Core/Src/lwip_tcp_server.c ****     /* else : a non empty frame was received from client but for some reason err != ERR_OK */
 107:Core/Src/lwip_tcp_server.c ****     else if (err != ERR_OK)
 108:Core/Src/lwip_tcp_server.c ****     {
 109:Core/Src/lwip_tcp_server.c ****         /* free received pbuf */
 110:Core/Src/lwip_tcp_server.c ****         if (p != NULL)
 111:Core/Src/lwip_tcp_server.c ****         {
 112:Core/Src/lwip_tcp_server.c ****             pbuf_free(p);
 113:Core/Src/lwip_tcp_server.c ****         }
 114:Core/Src/lwip_tcp_server.c ****         ret_err = err;
 115:Core/Src/lwip_tcp_server.c ****     }
 116:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_ACCEPTED)
 117:Core/Src/lwip_tcp_server.c ****     {
 118:Core/Src/lwip_tcp_server.c ****         /* first data chunk in p->payload */
 119:Core/Src/lwip_tcp_server.c ****         es->state = ES_RECEIVED;
 120:Core/Src/lwip_tcp_server.c ****         /* store reference to incoming pbuf (chain) */
 121:Core/Src/lwip_tcp_server.c ****         es->p = p;
 122:Core/Src/lwip_tcp_server.c ****         /* initialize LwIP tcp_sent callback function */
 123:Core/Src/lwip_tcp_server.c ****         tcp_sent(pcb, tcp_server_sent);
 124:Core/Src/lwip_tcp_server.c ****         /* handle received data */
 125:Core/Src/lwip_tcp_server.c ****         tcp_server_handle_input(pcb, es);
 126:Core/Src/lwip_tcp_server.c **** 
 127:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 128:Core/Src/lwip_tcp_server.c ****     }
 129:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_RECEIVED)
 130:Core/Src/lwip_tcp_server.c ****     {
 131:Core/Src/lwip_tcp_server.c ****         /* read some more data */
 132:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 133:Core/Src/lwip_tcp_server.c ****         {
 134:Core/Src/lwip_tcp_server.c ****             es->p = p;
 135:Core/Src/lwip_tcp_server.c ****             tcp_server_handle_input(pcb, es);
 136:Core/Src/lwip_tcp_server.c ****         }
 137:Core/Src/lwip_tcp_server.c ****         else
 138:Core/Src/lwip_tcp_server.c ****         {
 139:Core/Src/lwip_tcp_server.c ****             struct pbuf *ptr;
 140:Core/Src/lwip_tcp_server.c ****             /* chain pbufs to the end of what we recv'ed previously  */
 141:Core/Src/lwip_tcp_server.c ****             ptr = es->p;
 142:Core/Src/lwip_tcp_server.c ****             pbuf_chain(ptr, p);
 143:Core/Src/lwip_tcp_server.c ****         }
 144:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 145:Core/Src/lwip_tcp_server.c ****     }
 146:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_CLOSING)
 147:Core/Src/lwip_tcp_server.c ****     {
 148:Core/Src/lwip_tcp_server.c ****         /* odd case, remote side closing twice, trash data */
 149:Core/Src/lwip_tcp_server.c ****         if (p != NULL)
 150:Core/Src/lwip_tcp_server.c ****         {
 151:Core/Src/lwip_tcp_server.c ****             /* free received pbuf */
 152:Core/Src/lwip_tcp_server.c ****             pbuf_free(p);
 153:Core/Src/lwip_tcp_server.c ****         }
 154:Core/Src/lwip_tcp_server.c ****     }
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 6


 155:Core/Src/lwip_tcp_server.c ****     else
 156:Core/Src/lwip_tcp_server.c ****     {
 157:Core/Src/lwip_tcp_server.c ****         /* unkown es->state, trash data */
 158:Core/Src/lwip_tcp_server.c ****         tcp_server_close(pcb, es);
 159:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 160:Core/Src/lwip_tcp_server.c ****     }
 161:Core/Src/lwip_tcp_server.c ****     return ret_err;
 162:Core/Src/lwip_tcp_server.c **** }
 163:Core/Src/lwip_tcp_server.c **** 
 164:Core/Src/lwip_tcp_server.c **** static void tcp_server_error(void *arg, err_t err)
 165:Core/Src/lwip_tcp_server.c **** {
 166:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 167:Core/Src/lwip_tcp_server.c **** 
 168:Core/Src/lwip_tcp_server.c ****     LWIP_UNUSED_ARG(err);
 169:Core/Src/lwip_tcp_server.c **** 
 170:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)arg;
 171:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
 172:Core/Src/lwip_tcp_server.c ****     {
 173:Core/Src/lwip_tcp_server.c ****         mem_free(es);
 174:Core/Src/lwip_tcp_server.c ****     }
 175:Core/Src/lwip_tcp_server.c **** }
 176:Core/Src/lwip_tcp_server.c **** 
 177:Core/Src/lwip_tcp_server.c **** static err_t tcp_server_poll(void *arg, struct tcp_pcb *pcb)
 178:Core/Src/lwip_tcp_server.c **** {
 179:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
 180:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 181:Core/Src/lwip_tcp_server.c **** 
 182:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)arg;
 183:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
 184:Core/Src/lwip_tcp_server.c ****     {
 185:Core/Src/lwip_tcp_server.c ****         if (es->p != NULL)
 186:Core/Src/lwip_tcp_server.c ****         {
 187:Core/Src/lwip_tcp_server.c ****             /* there is a remaining pbuf (chain)  */
 188:Core/Src/lwip_tcp_server.c ****             tcp_sent(pcb, tcp_server_sent);
 189:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 190:Core/Src/lwip_tcp_server.c ****         }
 191:Core/Src/lwip_tcp_server.c ****         else
 192:Core/Src/lwip_tcp_server.c ****         {
 193:Core/Src/lwip_tcp_server.c ****             /* no remaining pbuf (chain)  */
 194:Core/Src/lwip_tcp_server.c ****             if (es->state == ES_CLOSING)
 195:Core/Src/lwip_tcp_server.c ****             {
 196:Core/Src/lwip_tcp_server.c ****                 /* close tcp connection */
 197:Core/Src/lwip_tcp_server.c ****                 tcp_server_close(pcb, es);
 198:Core/Src/lwip_tcp_server.c ****             }
 199:Core/Src/lwip_tcp_server.c ****         }
 200:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 201:Core/Src/lwip_tcp_server.c ****     }
 202:Core/Src/lwip_tcp_server.c ****     else
 203:Core/Src/lwip_tcp_server.c ****     {
 204:Core/Src/lwip_tcp_server.c ****         /* nothing to be done */
 205:Core/Src/lwip_tcp_server.c ****         tcp_abort(pcb);
 206:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_ABRT;
 207:Core/Src/lwip_tcp_server.c ****     }
 208:Core/Src/lwip_tcp_server.c ****     return ret_err;
 209:Core/Src/lwip_tcp_server.c **** }
 210:Core/Src/lwip_tcp_server.c **** 
 211:Core/Src/lwip_tcp_server.c **** static err_t tcp_server_sent(void *arg, struct tcp_pcb *pcb, uint16_t len)
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 7


 212:Core/Src/lwip_tcp_server.c **** {
 213:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 214:Core/Src/lwip_tcp_server.c ****     LWIP_UNUSED_ARG(len);
 215:Core/Src/lwip_tcp_server.c **** 
 216:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)arg;
 217:Core/Src/lwip_tcp_server.c ****     es->retries = 0;
 218:Core/Src/lwip_tcp_server.c **** 
 219:Core/Src/lwip_tcp_server.c ****     if (es->p != NULL)
 220:Core/Src/lwip_tcp_server.c ****     {
 221:Core/Src/lwip_tcp_server.c ****         /* still got pbufs to send */
 222:Core/Src/lwip_tcp_server.c ****         tcp_sent(pcb, tcp_server_sent);
 223:Core/Src/lwip_tcp_server.c ****         tcp_server_send(pcb, es);
 224:Core/Src/lwip_tcp_server.c ****     }
 225:Core/Src/lwip_tcp_server.c ****     else
 226:Core/Src/lwip_tcp_server.c ****     {
 227:Core/Src/lwip_tcp_server.c ****         /* no more pbufs to send */
 228:Core/Src/lwip_tcp_server.c ****         if (es->state == ES_CLOSING)
 229:Core/Src/lwip_tcp_server.c ****         {
 230:Core/Src/lwip_tcp_server.c ****             tcp_server_close(pcb, es);
 231:Core/Src/lwip_tcp_server.c ****         }
 232:Core/Src/lwip_tcp_server.c ****     }
 233:Core/Src/lwip_tcp_server.c ****     return ERR_OK;
 234:Core/Src/lwip_tcp_server.c **** }
 235:Core/Src/lwip_tcp_server.c **** 
 236:Core/Src/lwip_tcp_server.c **** static void tcp_server_send(struct tcp_pcb *pcb, struct tcp_server_struct *es)
 237:Core/Src/lwip_tcp_server.c **** {
 133              		.loc 1 237 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		.loc 1 237 1 is_stmt 0 view .LVU33
 138 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 139              	.LCFI1:
 140              		.cfi_def_cfa_offset 24
 141              		.cfi_offset 4, -24
 142              		.cfi_offset 5, -20
 143              		.cfi_offset 6, -16
 144              		.cfi_offset 7, -12
 145              		.cfi_offset 8, -8
 146              		.cfi_offset 14, -4
 147 0004 0646     		mov	r6, r0
 148 0006 0F46     		mov	r7, r1
 238:Core/Src/lwip_tcp_server.c ****     struct pbuf *ptr;
 149              		.loc 1 238 5 is_stmt 1 view .LVU34
 239:Core/Src/lwip_tcp_server.c ****     err_t wr_err = ERR_OK;
 150              		.loc 1 239 5 view .LVU35
 151              	.LVL14:
 240:Core/Src/lwip_tcp_server.c **** 
 241:Core/Src/lwip_tcp_server.c ****     while ((wr_err == ERR_OK) &&
 152              		.loc 1 241 5 view .LVU36
 239:Core/Src/lwip_tcp_server.c ****     err_t wr_err = ERR_OK;
 153              		.loc 1 239 11 is_stmt 0 view .LVU37
 154 0008 0025     		movs	r5, #0
 155              		.loc 1 241 11 view .LVU38
 156 000a 0FE0     		b	.L8
 157              	.LVL15:
 158              	.L16:
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 8


 159              	.LBB2:
 242:Core/Src/lwip_tcp_server.c ****            (es->p != NULL) &&
 243:Core/Src/lwip_tcp_server.c ****            (es->p->len <= tcp_sndbuf(pcb)))
 244:Core/Src/lwip_tcp_server.c ****     {
 245:Core/Src/lwip_tcp_server.c ****         /* get pointer on pbuf from es structure */
 246:Core/Src/lwip_tcp_server.c ****         ptr = es->p;
 247:Core/Src/lwip_tcp_server.c **** 
 248:Core/Src/lwip_tcp_server.c ****         /* enqueue data for transmission */
 249:Core/Src/lwip_tcp_server.c ****         wr_err = tcp_write(pcb, ptr->payload, ptr->len, 1);
 250:Core/Src/lwip_tcp_server.c **** 
 251:Core/Src/lwip_tcp_server.c ****         if (wr_err == ERR_OK)
 252:Core/Src/lwip_tcp_server.c ****         {
 253:Core/Src/lwip_tcp_server.c ****             uint16_t plen;
 160              		.loc 1 253 13 is_stmt 1 view .LVU39
 254:Core/Src/lwip_tcp_server.c ****             uint8_t freed;
 161              		.loc 1 254 13 view .LVU40
 255:Core/Src/lwip_tcp_server.c **** 
 256:Core/Src/lwip_tcp_server.c ****             plen = ptr->len;
 162              		.loc 1 256 13 view .LVU41
 163              		.loc 1 256 18 is_stmt 0 view .LVU42
 164 000c B4F80A80 		ldrh	r8, [r4, #10]
 165              	.LVL16:
 257:Core/Src/lwip_tcp_server.c ****             /* continue with next pbuf in chain (if any) */
 258:Core/Src/lwip_tcp_server.c ****             es->p = ptr->next;
 166              		.loc 1 258 13 is_stmt 1 view .LVU43
 167              		.loc 1 258 24 is_stmt 0 view .LVU44
 168 0010 2068     		ldr	r0, [r4]
 169              	.LVL17:
 170              		.loc 1 258 19 view .LVU45
 171 0012 B860     		str	r0, [r7, #8]
 259:Core/Src/lwip_tcp_server.c ****             if (es->p != NULL)
 172              		.loc 1 259 13 is_stmt 1 view .LVU46
 173              		.loc 1 259 16 is_stmt 0 view .LVU47
 174 0014 08B1     		cbz	r0, .L11
 260:Core/Src/lwip_tcp_server.c ****             {
 261:Core/Src/lwip_tcp_server.c ****                 /* new reference! */
 262:Core/Src/lwip_tcp_server.c ****                 pbuf_ref(es->p);
 175              		.loc 1 262 17 is_stmt 1 view .LVU48
 176 0016 FFF7FEFF 		bl	pbuf_ref
 177              	.LVL18:
 178              	.L11:
 263:Core/Src/lwip_tcp_server.c ****             }
 264:Core/Src/lwip_tcp_server.c **** 
 265:Core/Src/lwip_tcp_server.c ****             /* chop first pbuf from chain */
 266:Core/Src/lwip_tcp_server.c ****             do
 179              		.loc 1 266 13 discriminator 1 view .LVU49
 267:Core/Src/lwip_tcp_server.c ****             {
 268:Core/Src/lwip_tcp_server.c ****                 /* try hard to free pbuf */
 269:Core/Src/lwip_tcp_server.c ****                 freed = pbuf_free(ptr);
 180              		.loc 1 269 17 discriminator 1 view .LVU50
 181              		.loc 1 269 25 is_stmt 0 discriminator 1 view .LVU51
 182 001a 2046     		mov	r0, r4
 183 001c FFF7FEFF 		bl	pbuf_free
 184              	.LVL19:
 270:Core/Src/lwip_tcp_server.c ****             } while (freed == 0);
 185              		.loc 1 270 21 is_stmt 1 discriminator 1 view .LVU52
 186              		.loc 1 270 13 is_stmt 0 discriminator 1 view .LVU53
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 9


 187 0020 0028     		cmp	r0, #0
 188 0022 FAD0     		beq	.L11
 271:Core/Src/lwip_tcp_server.c ****             /* we can read more data now */
 272:Core/Src/lwip_tcp_server.c ****             tcp_recved(pcb, plen);
 189              		.loc 1 272 13 is_stmt 1 view .LVU54
 190 0024 4146     		mov	r1, r8
 191 0026 3046     		mov	r0, r6
 192              	.LVL20:
 193              		.loc 1 272 13 is_stmt 0 view .LVU55
 194 0028 FFF7FEFF 		bl	tcp_recved
 195              	.LVL21:
 196              	.L8:
 197              		.loc 1 272 13 view .LVU56
 198              	.LBE2:
 273:Core/Src/lwip_tcp_server.c ****         }
 274:Core/Src/lwip_tcp_server.c ****         else if (wr_err == ERR_MEM)
 275:Core/Src/lwip_tcp_server.c ****         {
 276:Core/Src/lwip_tcp_server.c ****             /* we are low on memory, try later, defer to poll */
 277:Core/Src/lwip_tcp_server.c ****             es->p = ptr;
 278:Core/Src/lwip_tcp_server.c ****         }
 279:Core/Src/lwip_tcp_server.c ****         else
 280:Core/Src/lwip_tcp_server.c ****         {
 281:Core/Src/lwip_tcp_server.c ****             /* other problem ?? */
 282:Core/Src/lwip_tcp_server.c ****         }
 199              		.loc 1 282 9 is_stmt 1 view .LVU57
 241:Core/Src/lwip_tcp_server.c ****            (es->p != NULL) &&
 200              		.loc 1 241 11 view .LVU58
 201 002c 9DB9     		cbnz	r5, .L7
 242:Core/Src/lwip_tcp_server.c ****            (es->p->len <= tcp_sndbuf(pcb)))
 202              		.loc 1 242 15 is_stmt 0 discriminator 1 view .LVU59
 203 002e BC68     		ldr	r4, [r7, #8]
 241:Core/Src/lwip_tcp_server.c ****            (es->p != NULL) &&
 204              		.loc 1 241 31 discriminator 1 view .LVU60
 205 0030 8CB1     		cbz	r4, .L7
 243:Core/Src/lwip_tcp_server.c ****     {
 206              		.loc 1 243 18 view .LVU61
 207 0032 6289     		ldrh	r2, [r4, #10]
 243:Core/Src/lwip_tcp_server.c ****     {
 208              		.loc 1 243 27 view .LVU62
 209 0034 B6F86430 		ldrh	r3, [r6, #100]
 242:Core/Src/lwip_tcp_server.c ****            (es->p->len <= tcp_sndbuf(pcb)))
 210              		.loc 1 242 28 view .LVU63
 211 0038 9A42     		cmp	r2, r3
 212 003a 0CD8     		bhi	.L7
 246:Core/Src/lwip_tcp_server.c **** 
 213              		.loc 1 246 9 is_stmt 1 view .LVU64
 214              	.LVL22:
 249:Core/Src/lwip_tcp_server.c **** 
 215              		.loc 1 249 9 view .LVU65
 249:Core/Src/lwip_tcp_server.c **** 
 216              		.loc 1 249 18 is_stmt 0 view .LVU66
 217 003c 0123     		movs	r3, #1
 218 003e 6168     		ldr	r1, [r4, #4]
 219 0040 3046     		mov	r0, r6
 220 0042 FFF7FEFF 		bl	tcp_write
 221              	.LVL23:
 251:Core/Src/lwip_tcp_server.c ****         {
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 10


 222              		.loc 1 251 9 is_stmt 1 view .LVU67
 251:Core/Src/lwip_tcp_server.c ****         {
 223              		.loc 1 251 12 is_stmt 0 view .LVU68
 224 0046 0546     		mov	r5, r0
 225 0048 0028     		cmp	r0, #0
 226 004a DFD0     		beq	.L16
 274:Core/Src/lwip_tcp_server.c ****         {
 227              		.loc 1 274 14 is_stmt 1 view .LVU69
 274:Core/Src/lwip_tcp_server.c ****         {
 228              		.loc 1 274 17 is_stmt 0 view .LVU70
 229 004c B0F1FF3F 		cmp	r0, #-1
 230 0050 ECD1     		bne	.L8
 277:Core/Src/lwip_tcp_server.c ****         }
 231              		.loc 1 277 13 is_stmt 1 view .LVU71
 277:Core/Src/lwip_tcp_server.c ****         }
 232              		.loc 1 277 19 is_stmt 0 view .LVU72
 233 0052 BC60     		str	r4, [r7, #8]
 234 0054 EAE7     		b	.L8
 235              	.LVL24:
 236              	.L7:
 283:Core/Src/lwip_tcp_server.c ****     }
 284:Core/Src/lwip_tcp_server.c **** }
 237              		.loc 1 284 1 view .LVU73
 238 0056 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 239              		.loc 1 284 1 view .LVU74
 240              		.cfi_endproc
 241              	.LFE173:
 243              		.section	.text.tcp_server_error,"ax",%progbits
 244              		.align	1
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 248              		.fpu fpv5-d16
 250              	tcp_server_error:
 251              	.LVL25:
 252              	.LFB170:
 165:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 253              		.loc 1 165 1 is_stmt 1 view -0
 254              		.cfi_startproc
 255              		@ args = 0, pretend = 0, frame = 0
 256              		@ frame_needed = 0, uses_anonymous_args = 0
 166:Core/Src/lwip_tcp_server.c **** 
 257              		.loc 1 166 5 view .LVU76
 168:Core/Src/lwip_tcp_server.c **** 
 258              		.loc 1 168 5 view .LVU77
 170:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
 259              		.loc 1 170 5 view .LVU78
 171:Core/Src/lwip_tcp_server.c ****     {
 260              		.loc 1 171 5 view .LVU79
 171:Core/Src/lwip_tcp_server.c ****     {
 261              		.loc 1 171 8 is_stmt 0 view .LVU80
 262 0000 18B1     		cbz	r0, .L20
 165:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 263              		.loc 1 165 1 view .LVU81
 264 0002 08B5     		push	{r3, lr}
 265              	.LCFI2:
 266              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 11


 267              		.cfi_offset 3, -8
 268              		.cfi_offset 14, -4
 173:Core/Src/lwip_tcp_server.c ****     }
 269              		.loc 1 173 9 is_stmt 1 view .LVU82
 270 0004 FFF7FEFF 		bl	mem_free
 271              	.LVL26:
 175:Core/Src/lwip_tcp_server.c **** 
 272              		.loc 1 175 1 is_stmt 0 view .LVU83
 273 0008 08BD     		pop	{r3, pc}
 274              	.LVL27:
 275              	.L20:
 276              	.LCFI3:
 277              		.cfi_def_cfa_offset 0
 278              		.cfi_restore 3
 279              		.cfi_restore 14
 175:Core/Src/lwip_tcp_server.c **** 
 280              		.loc 1 175 1 view .LVU84
 281 000a 7047     		bx	lr
 282              		.cfi_endproc
 283              	.LFE170:
 285              		.section	.text.tcp_server_close,"ax",%progbits
 286              		.align	1
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 290              		.fpu fpv5-d16
 292              	tcp_server_close:
 293              	.LVL28:
 294              	.LFB174:
 285:Core/Src/lwip_tcp_server.c **** 
 286:Core/Src/lwip_tcp_server.c **** static void tcp_server_close(struct tcp_pcb *pcb, struct tcp_server_struct *es)
 287:Core/Src/lwip_tcp_server.c **** {
 295              		.loc 1 287 1 is_stmt 1 view -0
 296              		.cfi_startproc
 297              		@ args = 0, pretend = 0, frame = 0
 298              		@ frame_needed = 0, uses_anonymous_args = 0
 299              		.loc 1 287 1 is_stmt 0 view .LVU86
 300 0000 38B5     		push	{r3, r4, r5, lr}
 301              	.LCFI4:
 302              		.cfi_def_cfa_offset 16
 303              		.cfi_offset 3, -16
 304              		.cfi_offset 4, -12
 305              		.cfi_offset 5, -8
 306              		.cfi_offset 14, -4
 307 0002 0446     		mov	r4, r0
 308 0004 0D46     		mov	r5, r1
 288:Core/Src/lwip_tcp_server.c ****     /* remove callbacks */
 289:Core/Src/lwip_tcp_server.c ****     tcp_arg(pcb, NULL);
 309              		.loc 1 289 5 is_stmt 1 view .LVU87
 310 0006 0021     		movs	r1, #0
 311              	.LVL29:
 312              		.loc 1 289 5 is_stmt 0 view .LVU88
 313 0008 FFF7FEFF 		bl	tcp_arg
 314              	.LVL30:
 290:Core/Src/lwip_tcp_server.c ****     tcp_recv(pcb, NULL);
 315              		.loc 1 290 5 is_stmt 1 view .LVU89
 316 000c 0021     		movs	r1, #0
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 12


 317 000e 2046     		mov	r0, r4
 318 0010 FFF7FEFF 		bl	tcp_recv
 319              	.LVL31:
 291:Core/Src/lwip_tcp_server.c ****     tcp_sent(pcb, NULL);
 320              		.loc 1 291 5 view .LVU90
 321 0014 0021     		movs	r1, #0
 322 0016 2046     		mov	r0, r4
 323 0018 FFF7FEFF 		bl	tcp_sent
 324              	.LVL32:
 292:Core/Src/lwip_tcp_server.c ****     tcp_err(pcb, NULL);
 325              		.loc 1 292 5 view .LVU91
 326 001c 0021     		movs	r1, #0
 327 001e 2046     		mov	r0, r4
 328 0020 FFF7FEFF 		bl	tcp_err
 329              	.LVL33:
 293:Core/Src/lwip_tcp_server.c ****     tcp_poll(pcb, NULL, 0);
 330              		.loc 1 293 5 view .LVU92
 331 0024 0022     		movs	r2, #0
 332 0026 1146     		mov	r1, r2
 333 0028 2046     		mov	r0, r4
 334 002a FFF7FEFF 		bl	tcp_poll
 335              	.LVL34:
 294:Core/Src/lwip_tcp_server.c **** 
 295:Core/Src/lwip_tcp_server.c ****     /* delete es structure */
 296:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
 336              		.loc 1 296 5 view .LVU93
 337              		.loc 1 296 8 is_stmt 0 view .LVU94
 338 002e 15B1     		cbz	r5, .L24
 297:Core/Src/lwip_tcp_server.c ****     {
 298:Core/Src/lwip_tcp_server.c ****         mem_free(es);
 339              		.loc 1 298 9 is_stmt 1 view .LVU95
 340 0030 2846     		mov	r0, r5
 341 0032 FFF7FEFF 		bl	mem_free
 342              	.LVL35:
 343              	.L24:
 299:Core/Src/lwip_tcp_server.c ****     }
 300:Core/Src/lwip_tcp_server.c **** 
 301:Core/Src/lwip_tcp_server.c ****     /* close tcp connection */
 302:Core/Src/lwip_tcp_server.c ****     tcp_close(pcb);
 344              		.loc 1 302 5 view .LVU96
 345 0036 2046     		mov	r0, r4
 346 0038 FFF7FEFF 		bl	tcp_close
 347              	.LVL36:
 303:Core/Src/lwip_tcp_server.c **** }
 348              		.loc 1 303 1 is_stmt 0 view .LVU97
 349 003c 38BD     		pop	{r3, r4, r5, pc}
 350              		.loc 1 303 1 view .LVU98
 351              		.cfi_endproc
 352              	.LFE174:
 354              		.section	.text.tcp_server_poll,"ax",%progbits
 355              		.align	1
 356              		.syntax unified
 357              		.thumb
 358              		.thumb_func
 359              		.fpu fpv5-d16
 361              	tcp_server_poll:
 362              	.LVL37:
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 13


 363              	.LFB171:
 178:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
 364              		.loc 1 178 1 is_stmt 1 view -0
 365              		.cfi_startproc
 366              		@ args = 0, pretend = 0, frame = 0
 367              		@ frame_needed = 0, uses_anonymous_args = 0
 178:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
 368              		.loc 1 178 1 is_stmt 0 view .LVU100
 369 0000 38B5     		push	{r3, r4, r5, lr}
 370              	.LCFI5:
 371              		.cfi_def_cfa_offset 16
 372              		.cfi_offset 3, -16
 373              		.cfi_offset 4, -12
 374              		.cfi_offset 5, -8
 375              		.cfi_offset 14, -4
 376 0002 0C46     		mov	r4, r1
 179:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 377              		.loc 1 179 5 is_stmt 1 view .LVU101
 180:Core/Src/lwip_tcp_server.c **** 
 378              		.loc 1 180 5 view .LVU102
 182:Core/Src/lwip_tcp_server.c ****     if (es != NULL)
 379              		.loc 1 182 5 view .LVU103
 380              	.LVL38:
 183:Core/Src/lwip_tcp_server.c ****     {
 381              		.loc 1 183 5 view .LVU104
 183:Core/Src/lwip_tcp_server.c ****     {
 382              		.loc 1 183 8 is_stmt 0 view .LVU105
 383 0004 B8B1     		cbz	r0, .L27
 384 0006 0546     		mov	r5, r0
 185:Core/Src/lwip_tcp_server.c ****         {
 385              		.loc 1 185 9 is_stmt 1 view .LVU106
 185:Core/Src/lwip_tcp_server.c ****         {
 386              		.loc 1 185 15 is_stmt 0 view .LVU107
 387 0008 8368     		ldr	r3, [r0, #8]
 185:Core/Src/lwip_tcp_server.c ****         {
 388              		.loc 1 185 12 view .LVU108
 389 000a 4BB1     		cbz	r3, .L28
 188:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 390              		.loc 1 188 13 is_stmt 1 view .LVU109
 391 000c 0D49     		ldr	r1, .L33
 392              	.LVL39:
 188:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 393              		.loc 1 188 13 is_stmt 0 view .LVU110
 394 000e 2046     		mov	r0, r4
 395              	.LVL40:
 188:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 396              		.loc 1 188 13 view .LVU111
 397 0010 FFF7FEFF 		bl	tcp_sent
 398              	.LVL41:
 189:Core/Src/lwip_tcp_server.c ****         }
 399              		.loc 1 189 13 is_stmt 1 view .LVU112
 400 0014 2946     		mov	r1, r5
 401 0016 2046     		mov	r0, r4
 402 0018 FFF7FEFF 		bl	tcp_server_send
 403              	.LVL42:
 200:Core/Src/lwip_tcp_server.c ****     }
 404              		.loc 1 200 17 is_stmt 0 view .LVU113
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 14


 405 001c 0020     		movs	r0, #0
 406              	.LVL43:
 407              	.L29:
 208:Core/Src/lwip_tcp_server.c **** }
 408              		.loc 1 208 5 is_stmt 1 view .LVU114
 209:Core/Src/lwip_tcp_server.c **** 
 409              		.loc 1 209 1 is_stmt 0 view .LVU115
 410 001e 38BD     		pop	{r3, r4, r5, pc}
 411              	.LVL44:
 412              	.L28:
 194:Core/Src/lwip_tcp_server.c ****             {
 413              		.loc 1 194 13 is_stmt 1 view .LVU116
 194:Core/Src/lwip_tcp_server.c ****             {
 414              		.loc 1 194 19 is_stmt 0 view .LVU117
 415 0020 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 194:Core/Src/lwip_tcp_server.c ****             {
 416              		.loc 1 194 16 view .LVU118
 417 0022 032B     		cmp	r3, #3
 418 0024 01D0     		beq	.L32
 200:Core/Src/lwip_tcp_server.c ****     }
 419              		.loc 1 200 17 view .LVU119
 420 0026 0020     		movs	r0, #0
 421              	.LVL45:
 200:Core/Src/lwip_tcp_server.c ****     }
 422              		.loc 1 200 17 view .LVU120
 423 0028 F9E7     		b	.L29
 424              	.LVL46:
 425              	.L32:
 197:Core/Src/lwip_tcp_server.c ****             }
 426              		.loc 1 197 17 is_stmt 1 view .LVU121
 427 002a 0146     		mov	r1, r0
 428              	.LVL47:
 197:Core/Src/lwip_tcp_server.c ****             }
 429              		.loc 1 197 17 is_stmt 0 view .LVU122
 430 002c 2046     		mov	r0, r4
 431              	.LVL48:
 197:Core/Src/lwip_tcp_server.c ****             }
 432              		.loc 1 197 17 view .LVU123
 433 002e FFF7FEFF 		bl	tcp_server_close
 434              	.LVL49:
 200:Core/Src/lwip_tcp_server.c ****     }
 435              		.loc 1 200 17 view .LVU124
 436 0032 0020     		movs	r0, #0
 437 0034 F3E7     		b	.L29
 438              	.LVL50:
 439              	.L27:
 205:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_ABRT;
 440              		.loc 1 205 9 is_stmt 1 view .LVU125
 441 0036 0846     		mov	r0, r1
 442              	.LVL51:
 205:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_ABRT;
 443              		.loc 1 205 9 is_stmt 0 view .LVU126
 444 0038 FFF7FEFF 		bl	tcp_abort
 445              	.LVL52:
 206:Core/Src/lwip_tcp_server.c ****     }
 446              		.loc 1 206 9 is_stmt 1 view .LVU127
 206:Core/Src/lwip_tcp_server.c ****     }
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 15


 447              		.loc 1 206 17 is_stmt 0 view .LVU128
 448 003c 6FF00C00 		mvn	r0, #12
 449 0040 EDE7     		b	.L29
 450              	.L34:
 451 0042 00BF     		.align	2
 452              	.L33:
 453 0044 00000000 		.word	tcp_server_sent
 454              		.cfi_endproc
 455              	.LFE171:
 457              		.section	.text.tcp_server_sent,"ax",%progbits
 458              		.align	1
 459              		.syntax unified
 460              		.thumb
 461              		.thumb_func
 462              		.fpu fpv5-d16
 464              	tcp_server_sent:
 465              	.LVL53:
 466              	.LFB172:
 212:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 467              		.loc 1 212 1 is_stmt 1 view -0
 468              		.cfi_startproc
 469              		@ args = 0, pretend = 0, frame = 0
 470              		@ frame_needed = 0, uses_anonymous_args = 0
 212:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 471              		.loc 1 212 1 is_stmt 0 view .LVU130
 472 0000 38B5     		push	{r3, r4, r5, lr}
 473              	.LCFI6:
 474              		.cfi_def_cfa_offset 16
 475              		.cfi_offset 3, -16
 476              		.cfi_offset 4, -12
 477              		.cfi_offset 5, -8
 478              		.cfi_offset 14, -4
 479 0002 0446     		mov	r4, r0
 480 0004 0D46     		mov	r5, r1
 213:Core/Src/lwip_tcp_server.c ****     LWIP_UNUSED_ARG(len);
 481              		.loc 1 213 5 is_stmt 1 view .LVU131
 214:Core/Src/lwip_tcp_server.c **** 
 482              		.loc 1 214 5 view .LVU132
 216:Core/Src/lwip_tcp_server.c ****     es->retries = 0;
 483              		.loc 1 216 5 view .LVU133
 484              	.LVL54:
 217:Core/Src/lwip_tcp_server.c **** 
 485              		.loc 1 217 5 view .LVU134
 217:Core/Src/lwip_tcp_server.c **** 
 486              		.loc 1 217 17 is_stmt 0 view .LVU135
 487 0006 0023     		movs	r3, #0
 488 0008 4370     		strb	r3, [r0, #1]
 219:Core/Src/lwip_tcp_server.c ****     {
 489              		.loc 1 219 5 is_stmt 1 view .LVU136
 219:Core/Src/lwip_tcp_server.c ****     {
 490              		.loc 1 219 11 is_stmt 0 view .LVU137
 491 000a 8368     		ldr	r3, [r0, #8]
 219:Core/Src/lwip_tcp_server.c ****     {
 492              		.loc 1 219 8 view .LVU138
 493 000c 4BB1     		cbz	r3, .L36
 222:Core/Src/lwip_tcp_server.c ****         tcp_server_send(pcb, es);
 494              		.loc 1 222 9 is_stmt 1 view .LVU139
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 16


 495 000e 0949     		ldr	r1, .L39
 496              	.LVL55:
 222:Core/Src/lwip_tcp_server.c ****         tcp_server_send(pcb, es);
 497              		.loc 1 222 9 is_stmt 0 view .LVU140
 498 0010 2846     		mov	r0, r5
 499              	.LVL56:
 222:Core/Src/lwip_tcp_server.c ****         tcp_server_send(pcb, es);
 500              		.loc 1 222 9 view .LVU141
 501 0012 FFF7FEFF 		bl	tcp_sent
 502              	.LVL57:
 223:Core/Src/lwip_tcp_server.c ****     }
 503              		.loc 1 223 9 is_stmt 1 view .LVU142
 504 0016 2146     		mov	r1, r4
 505 0018 2846     		mov	r0, r5
 506 001a FFF7FEFF 		bl	tcp_server_send
 507              	.LVL58:
 508              	.L37:
 233:Core/Src/lwip_tcp_server.c **** }
 509              		.loc 1 233 5 view .LVU143
 234:Core/Src/lwip_tcp_server.c **** 
 510              		.loc 1 234 1 is_stmt 0 view .LVU144
 511 001e 0020     		movs	r0, #0
 512 0020 38BD     		pop	{r3, r4, r5, pc}
 513              	.LVL59:
 514              	.L36:
 228:Core/Src/lwip_tcp_server.c ****         {
 515              		.loc 1 228 9 is_stmt 1 view .LVU145
 228:Core/Src/lwip_tcp_server.c ****         {
 516              		.loc 1 228 15 is_stmt 0 view .LVU146
 517 0022 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 228:Core/Src/lwip_tcp_server.c ****         {
 518              		.loc 1 228 12 view .LVU147
 519 0024 032B     		cmp	r3, #3
 520 0026 FAD1     		bne	.L37
 230:Core/Src/lwip_tcp_server.c ****         }
 521              		.loc 1 230 13 is_stmt 1 view .LVU148
 522 0028 0146     		mov	r1, r0
 523              	.LVL60:
 230:Core/Src/lwip_tcp_server.c ****         }
 524              		.loc 1 230 13 is_stmt 0 view .LVU149
 525 002a 2846     		mov	r0, r5
 526              	.LVL61:
 230:Core/Src/lwip_tcp_server.c ****         }
 527              		.loc 1 230 13 view .LVU150
 528 002c FFF7FEFF 		bl	tcp_server_close
 529              	.LVL62:
 230:Core/Src/lwip_tcp_server.c ****         }
 530              		.loc 1 230 13 view .LVU151
 531 0030 F5E7     		b	.L37
 532              	.L40:
 533 0032 00BF     		.align	2
 534              	.L39:
 535 0034 00000000 		.word	tcp_server_sent
 536              		.cfi_endproc
 537              	.LFE172:
 539              		.section	.rodata.tcp_server_handle_input.str1.4,"aMS",%progbits,1
 540              		.align	2
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 17


 541              	.LC0:
 542 0000 2066726F 		.ascii	" from %s:%d\000"
 542      6D202573 
 542      3A256400 
 543              		.section	.text.tcp_server_handle_input,"ax",%progbits
 544              		.align	1
 545              		.syntax unified
 546              		.thumb
 547              		.thumb_func
 548              		.fpu fpv5-d16
 550              	tcp_server_handle_input:
 551              	.LVL63:
 552              	.LFB175:
 304:Core/Src/lwip_tcp_server.c **** 
 305:Core/Src/lwip_tcp_server.c **** static void tcp_server_handle_input(struct tcp_pcb *pcb, struct tcp_server_struct *es)
 306:Core/Src/lwip_tcp_server.c **** {
 553              		.loc 1 306 1 is_stmt 1 view -0
 554              		.cfi_startproc
 555              		@ args = 0, pretend = 0, frame = 208
 556              		@ frame_needed = 0, uses_anonymous_args = 0
 557              		.loc 1 306 1 is_stmt 0 view .LVU153
 558 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 559              	.LCFI7:
 560              		.cfi_def_cfa_offset 28
 561              		.cfi_offset 4, -28
 562              		.cfi_offset 5, -24
 563              		.cfi_offset 6, -20
 564              		.cfi_offset 7, -16
 565              		.cfi_offset 8, -12
 566              		.cfi_offset 9, -8
 567              		.cfi_offset 14, -4
 568 0004 B5B0     		sub	sp, sp, #212
 569              	.LCFI8:
 570              		.cfi_def_cfa_offset 240
 571 0006 8046     		mov	r8, r0
 572 0008 0C46     		mov	r4, r1
 307:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *esTx;
 573              		.loc 1 307 5 is_stmt 1 view .LVU154
 308:Core/Src/lwip_tcp_server.c **** 
 309:Core/Src/lwip_tcp_server.c ****     /* get the Remote IP */
 310:Core/Src/lwip_tcp_server.c ****     ip4_addr_t inIP = pcb->remote_ip;
 574              		.loc 1 310 5 view .LVU155
 575              		.loc 1 310 16 is_stmt 0 view .LVU156
 576 000a 4368     		ldr	r3, [r0, #4]
 577 000c 3393     		str	r3, [sp, #204]
 311:Core/Src/lwip_tcp_server.c ****     uint16_t inPort = pcb->remote_port;
 578              		.loc 1 311 5 is_stmt 1 view .LVU157
 579              		.loc 1 311 14 is_stmt 0 view .LVU158
 580 000e B0F81890 		ldrh	r9, [r0, #24]
 581              	.LVL64:
 312:Core/Src/lwip_tcp_server.c **** 
 313:Core/Src/lwip_tcp_server.c ****     /* Extract the IP */
 314:Core/Src/lwip_tcp_server.c ****     char *remIP = ipaddr_ntoa(&inIP);
 582              		.loc 1 314 5 is_stmt 1 view .LVU159
 583              		.loc 1 314 19 is_stmt 0 view .LVU160
 584 0012 33A8     		add	r0, sp, #204
 585              	.LVL65:
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 18


 586              		.loc 1 314 19 view .LVU161
 587 0014 FFF7FEFF 		bl	ip4addr_ntoa
 588              	.LVL66:
 589              		.loc 1 314 19 view .LVU162
 590 0018 0646     		mov	r6, r0
 591              	.LVL67:
 315:Core/Src/lwip_tcp_server.c **** 
 316:Core/Src/lwip_tcp_server.c ****     esTx->state = es->state;
 592              		.loc 1 316 5 is_stmt 1 view .LVU163
 593              		.loc 1 316 21 is_stmt 0 view .LVU164
 594 001a 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 595              		.loc 1 316 17 view .LVU165
 596 001c 0025     		movs	r5, #0
 597 001e 2B70     		strb	r3, [r5]
 317:Core/Src/lwip_tcp_server.c ****     esTx->pcb = es->pcb;
 598              		.loc 1 317 5 is_stmt 1 view .LVU166
 599              		.loc 1 317 19 is_stmt 0 view .LVU167
 600 0020 6368     		ldr	r3, [r4, #4]
 601              		.loc 1 317 15 view .LVU168
 602 0022 6B60     		str	r3, [r5, #4]
 318:Core/Src/lwip_tcp_server.c ****     esTx->p = es->p;
 603              		.loc 1 318 5 is_stmt 1 view .LVU169
 604              		.loc 1 318 17 is_stmt 0 view .LVU170
 605 0024 A368     		ldr	r3, [r4, #8]
 606              		.loc 1 318 13 view .LVU171
 607 0026 AB60     		str	r3, [r5, #8]
 319:Core/Src/lwip_tcp_server.c **** 
 320:Core/Src/lwip_tcp_server.c ****     char buf[100];
 608              		.loc 1 320 5 is_stmt 1 view .LVU172
 321:Core/Src/lwip_tcp_server.c ****     memset(buf, '\0', 100);
 609              		.loc 1 321 5 view .LVU173
 610 0028 1AAF     		add	r7, sp, #104
 611 002a 6422     		movs	r2, #100
 612 002c 2946     		mov	r1, r5
 613 002e 3846     		mov	r0, r7
 614              	.LVL68:
 615              		.loc 1 321 5 is_stmt 0 view .LVU174
 616 0030 FFF7FEFF 		bl	memset
 617              	.LVL69:
 322:Core/Src/lwip_tcp_server.c **** 
 323:Core/Src/lwip_tcp_server.c ****     strncpy(buf, (char *)es->p->payload, es->p->tot_len);
 618              		.loc 1 323 5 is_stmt 1 view .LVU175
 619              		.loc 1 323 28 is_stmt 0 view .LVU176
 620 0034 A368     		ldr	r3, [r4, #8]
 621              		.loc 1 323 5 view .LVU177
 622 0036 1A89     		ldrh	r2, [r3, #8]
 623 0038 5968     		ldr	r1, [r3, #4]
 624 003a 3846     		mov	r0, r7
 625 003c FFF7FEFF 		bl	strncpy
 626              	.LVL70:
 324:Core/Src/lwip_tcp_server.c ****     char additionalString[100];
 627              		.loc 1 324 5 is_stmt 1 view .LVU178
 325:Core/Src/lwip_tcp_server.c ****     sprintf(additionalString, " from %s:%d", remIP, inPort);
 628              		.loc 1 325 5 view .LVU179
 629 0040 4B46     		mov	r3, r9
 630 0042 3246     		mov	r2, r6
 631 0044 1149     		ldr	r1, .L43
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 19


 632 0046 01A8     		add	r0, sp, #4
 633 0048 FFF7FEFF 		bl	sprintf
 634              	.LVL71:
 326:Core/Src/lwip_tcp_server.c ****     strcat(buf, additionalString);
 635              		.loc 1 326 5 view .LVU180
 636 004c 01A9     		add	r1, sp, #4
 637 004e 3846     		mov	r0, r7
 638 0050 FFF7FEFF 		bl	strcat
 639              	.LVL72:
 327:Core/Src/lwip_tcp_server.c **** 
 328:Core/Src/lwip_tcp_server.c ****     esTx->p->payload = (void *)buf;
 640              		.loc 1 328 5 view .LVU181
 641              		.loc 1 328 9 is_stmt 0 view .LVU182
 642 0054 AB68     		ldr	r3, [r5, #8]
 643              		.loc 1 328 22 view .LVU183
 644 0056 5F60     		str	r7, [r3, #4]
 329:Core/Src/lwip_tcp_server.c ****     esTx->p->tot_len = (es->p->tot_len - es->p->len) + strlen(buf);
 645              		.loc 1 329 5 is_stmt 1 view .LVU184
 646              		.loc 1 329 27 is_stmt 0 view .LVU185
 647 0058 A368     		ldr	r3, [r4, #8]
 648              		.loc 1 329 30 view .LVU186
 649 005a 1E89     		ldrh	r6, [r3, #8]
 650              	.LVL73:
 651              		.loc 1 329 47 view .LVU187
 652 005c 5B89     		ldrh	r3, [r3, #10]
 653              		.loc 1 329 40 view .LVU188
 654 005e F61A     		subs	r6, r6, r3
 655 0060 B6B2     		uxth	r6, r6
 656              		.loc 1 329 56 view .LVU189
 657 0062 3846     		mov	r0, r7
 658 0064 FFF7FEFF 		bl	strlen
 659              	.LVL74:
 660              		.loc 1 329 9 view .LVU190
 661 0068 AB68     		ldr	r3, [r5, #8]
 662              		.loc 1 329 54 view .LVU191
 663 006a 0644     		add	r6, r6, r0
 664              		.loc 1 329 22 view .LVU192
 665 006c 1E81     		strh	r6, [r3, #8]	@ movhi
 330:Core/Src/lwip_tcp_server.c ****     esTx->p->len = strlen(buf);
 666              		.loc 1 330 5 is_stmt 1 view .LVU193
 667              		.loc 1 330 20 is_stmt 0 view .LVU194
 668 006e 3846     		mov	r0, r7
 669 0070 FFF7FEFF 		bl	strlen
 670              	.LVL75:
 671              		.loc 1 330 9 view .LVU195
 672 0074 AB68     		ldr	r3, [r5, #8]
 673              		.loc 1 330 18 view .LVU196
 674 0076 5881     		strh	r0, [r3, #10]	@ movhi
 331:Core/Src/lwip_tcp_server.c **** 
 332:Core/Src/lwip_tcp_server.c ****     tcp_server_send(pcb, esTx);
 675              		.loc 1 332 5 is_stmt 1 view .LVU197
 676 0078 2946     		mov	r1, r5
 677 007a 4046     		mov	r0, r8
 678 007c FFF7FEFF 		bl	tcp_server_send
 679              	.LVL76:
 333:Core/Src/lwip_tcp_server.c **** 
 334:Core/Src/lwip_tcp_server.c ****     pbuf_free(es->p);
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 20


 680              		.loc 1 334 5 view .LVU198
 681 0080 A068     		ldr	r0, [r4, #8]
 682 0082 FFF7FEFF 		bl	pbuf_free
 683              	.LVL77:
 335:Core/Src/lwip_tcp_server.c **** }...
 684              		.loc 1 335 1 is_stmt 0 view .LVU199
 685 0086 35B0     		add	sp, sp, #212
 686              	.LCFI9:
 687              		.cfi_def_cfa_offset 28
 688              		@ sp needed
 689 0088 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 690              	.LVL78:
 691              	.L44:
 692              		.loc 1 335 1 view .LVU200
 693              		.align	2
 694              	.L43:
 695 008c 00000000 		.word	.LC0
 696              		.cfi_endproc
 697              	.LFE175:
 699              		.section	.rodata.tcp_server_recv.str1.4,"aMS",%progbits,1
 700              		.align	2
 701              	.LC1:
 702 0000 436F7265 		.ascii	"Core/Src/lwip_tcp_server.c\000"
 702      2F537263 
 702      2F6C7769 
 702      705F7463 
 702      705F7365 
 703 001b 00       		.align	2
 704              	.LC2:
 705 001c 61726720 		.ascii	"arg != NULL\000"
 705      213D204E 
 705      554C4C00 
 706              		.align	2
 707              	.LC3:
 708 0028 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 708      7274696F 
 708      6E202225 
 708      73222066 
 708      61696C65 
 709              		.section	.text.tcp_server_recv,"ax",%progbits
 710              		.align	1
 711              		.syntax unified
 712              		.thumb
 713              		.thumb_func
 714              		.fpu fpv5-d16
 716              	tcp_server_recv:
 717              	.LVL79:
 718              	.LFB169:
  78:Core/Src/lwip_tcp_server.c **** {
 719              		.loc 1 78 1 is_stmt 1 view -0
 720              		.cfi_startproc
 721              		@ args = 0, pretend = 0, frame = 0
 722              		@ frame_needed = 0, uses_anonymous_args = 0
  78:Core/Src/lwip_tcp_server.c **** {
 723              		.loc 1 78 1 is_stmt 0 view .LVU202
 724 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 725              	.LCFI10:
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 21


 726              		.cfi_def_cfa_offset 24
 727              		.cfi_offset 4, -24
 728              		.cfi_offset 5, -20
 729              		.cfi_offset 6, -16
 730              		.cfi_offset 7, -12
 731              		.cfi_offset 8, -8
 732              		.cfi_offset 14, -4
 733 0004 8846     		mov	r8, r1
 734 0006 1446     		mov	r4, r2
 735 0008 1D46     		mov	r5, r3
  79:Core/Src/lwip_tcp_server.c ****     struct tcp_server_struct *es;
 736              		.loc 1 79 5 is_stmt 1 view .LVU203
  80:Core/Src/lwip_tcp_server.c ****     err_t ret_err;
 737              		.loc 1 80 5 view .LVU204
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 738              		.loc 1 82 5 view .LVU205
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 739              		.loc 1 82 5 view .LVU206
 740 000a 0646     		mov	r6, r0
 741 000c 70B1     		cbz	r0, .L56
 742              	.LVL80:
 743              	.L46:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 744              		.loc 1 82 5 discriminator 3 view .LVU207
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 745              		.loc 1 82 5 discriminator 3 view .LVU208
  84:Core/Src/lwip_tcp_server.c ****     es = (struct tcp_server_struct *)arg;
 746              		.loc 1 84 5 discriminator 3 view .LVU209
  87:Core/Src/lwip_tcp_server.c ****     if (p == NULL)
 747              		.loc 1 87 5 discriminator 3 view .LVU210
  87:Core/Src/lwip_tcp_server.c ****     if (p == NULL)
 748              		.loc 1 87 8 is_stmt 0 discriminator 3 view .LVU211
 749 000e A4B1     		cbz	r4, .L57
 107:Core/Src/lwip_tcp_server.c ****     else if (err != ERR_OK)
 750              		.loc 1 107 10 is_stmt 1 view .LVU212
 107:Core/Src/lwip_tcp_server.c ****     else if (err != ERR_OK)
 751              		.loc 1 107 13 is_stmt 0 view .LVU213
 752 0010 3DBB     		cbnz	r5, .L58
 116:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_ACCEPTED)
 753              		.loc 1 116 10 is_stmt 1 view .LVU214
 116:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_ACCEPTED)
 754              		.loc 1 116 16 is_stmt 0 view .LVU215
 755 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 116:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_ACCEPTED)
 756              		.loc 1 116 13 view .LVU216
 757 0014 012B     		cmp	r3, #1
 758 0016 2BD0     		beq	.L59
 129:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_RECEIVED)
 759              		.loc 1 129 10 is_stmt 1 view .LVU217
 129:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_RECEIVED)
 760              		.loc 1 129 13 is_stmt 0 view .LVU218
 761 0018 022B     		cmp	r3, #2
 762 001a 36D0     		beq	.L60
 146:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_CLOSING)
 763              		.loc 1 146 10 is_stmt 1 view .LVU219
 146:Core/Src/lwip_tcp_server.c ****     else if (es->state == ES_CLOSING)
 764              		.loc 1 146 13 is_stmt 0 view .LVU220
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 22


 765 001c 032B     		cmp	r3, #3
 766 001e 42D0     		beq	.L61
 158:Core/Src/lwip_tcp_server.c ****         tcp_server_close(pcb, es);
 767              		.loc 1 158 9 is_stmt 1 view .LVU221
 768 0020 3146     		mov	r1, r6
 769 0022 4046     		mov	r0, r8
 770 0024 FFF7FEFF 		bl	tcp_server_close
 771              	.LVL81:
 159:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 772              		.loc 1 159 9 view .LVU222
 159:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 773              		.loc 1 159 17 is_stmt 0 view .LVU223
 774 0028 2F46     		mov	r7, r5
 775 002a 1EE0     		b	.L49
 776              	.LVL82:
 777              	.L56:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 778              		.loc 1 82 5 is_stmt 1 discriminator 1 view .LVU224
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 779              		.loc 1 82 5 discriminator 1 view .LVU225
 780 002c 204B     		ldr	r3, .L64
 781              	.LVL83:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 782              		.loc 1 82 5 is_stmt 0 discriminator 1 view .LVU226
 783 002e 5222     		movs	r2, #82
 784              	.LVL84:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 785              		.loc 1 82 5 discriminator 1 view .LVU227
 786 0030 2049     		ldr	r1, .L64+4
 787              	.LVL85:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 788              		.loc 1 82 5 discriminator 1 view .LVU228
 789 0032 2148     		ldr	r0, .L64+8
 790              	.LVL86:
  82:Core/Src/lwip_tcp_server.c ****     LWIP_ASSERT("arg != NULL", arg != NULL);
 791              		.loc 1 82 5 discriminator 1 view .LVU229
 792 0034 FFF7FEFF 		bl	printf
 793              	.LVL87:
 794 0038 E9E7     		b	.L46
 795              	.LVL88:
 796              	.L57:
  90:Core/Src/lwip_tcp_server.c ****         es->state = ES_CLOSING;
 797              		.loc 1 90 9 is_stmt 1 view .LVU230
  90:Core/Src/lwip_tcp_server.c ****         es->state = ES_CLOSING;
 798              		.loc 1 90 19 is_stmt 0 view .LVU231
 799 003a 0323     		movs	r3, #3
 800 003c 3370     		strb	r3, [r6]
  91:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 801              		.loc 1 91 9 is_stmt 1 view .LVU232
  91:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 802              		.loc 1 91 15 is_stmt 0 view .LVU233
 803 003e B368     		ldr	r3, [r6, #8]
  91:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 804              		.loc 1 91 12 view .LVU234
 805 0040 4BB1     		cbz	r3, .L62
 100:Core/Src/lwip_tcp_server.c ****             tcp_sent(pcb, tcp_server_sent);
 806              		.loc 1 100 13 is_stmt 1 view .LVU235
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 23


 807 0042 1E49     		ldr	r1, .L64+12
 808 0044 4046     		mov	r0, r8
 809 0046 FFF7FEFF 		bl	tcp_sent
 810              	.LVL89:
 102:Core/Src/lwip_tcp_server.c ****             tcp_server_send(pcb, es);
 811              		.loc 1 102 13 view .LVU236
 812 004a 3146     		mov	r1, r6
 813 004c 4046     		mov	r0, r8
 814 004e FFF7FEFF 		bl	tcp_server_send
 815              	.LVL90:
 104:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 816              		.loc 1 104 17 is_stmt 0 view .LVU237
 817 0052 0027     		movs	r7, #0
 818 0054 09E0     		b	.L49
 819              	.L62:
  94:Core/Src/lwip_tcp_server.c ****             tcp_server_close(pcb, es);
 820              		.loc 1 94 13 is_stmt 1 view .LVU238
 821 0056 3146     		mov	r1, r6
 822 0058 4046     		mov	r0, r8
 823 005a FFF7FEFF 		bl	tcp_server_close
 824              	.LVL91:
 104:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 825              		.loc 1 104 17 is_stmt 0 view .LVU239
 826 005e 0027     		movs	r7, #0
 827 0060 03E0     		b	.L49
 828              	.L58:
 110:Core/Src/lwip_tcp_server.c ****         if (p != NULL)
 829              		.loc 1 110 9 is_stmt 1 view .LVU240
 112:Core/Src/lwip_tcp_server.c ****             pbuf_free(p);
 830              		.loc 1 112 13 view .LVU241
 831 0062 2046     		mov	r0, r4
 832 0064 FFF7FEFF 		bl	pbuf_free
 833              	.LVL92:
 114:Core/Src/lwip_tcp_server.c ****         ret_err = err;
 834              		.loc 1 114 9 view .LVU242
 114:Core/Src/lwip_tcp_server.c ****         ret_err = err;
 835              		.loc 1 114 17 is_stmt 0 view .LVU243
 836 0068 2F46     		mov	r7, r5
 837              	.LVL93:
 838              	.L49:
 161:Core/Src/lwip_tcp_server.c ****     return ret_err;
 839              		.loc 1 161 5 is_stmt 1 view .LVU244
 162:Core/Src/lwip_tcp_server.c **** }
 840              		.loc 1 162 1 is_stmt 0 view .LVU245
 841 006a 3846     		mov	r0, r7
 842 006c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 843              	.LVL94:
 844              	.L59:
 119:Core/Src/lwip_tcp_server.c ****         es->state = ES_RECEIVED;
 845              		.loc 1 119 9 is_stmt 1 view .LVU246
 119:Core/Src/lwip_tcp_server.c ****         es->state = ES_RECEIVED;
 846              		.loc 1 119 19 is_stmt 0 view .LVU247
 847 0070 0223     		movs	r3, #2
 848 0072 3370     		strb	r3, [r6]
 121:Core/Src/lwip_tcp_server.c ****         es->p = p;
 849              		.loc 1 121 9 is_stmt 1 view .LVU248
 121:Core/Src/lwip_tcp_server.c ****         es->p = p;
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 24


 850              		.loc 1 121 15 is_stmt 0 view .LVU249
 851 0074 B460     		str	r4, [r6, #8]
 123:Core/Src/lwip_tcp_server.c ****         tcp_sent(pcb, tcp_server_sent);
 852              		.loc 1 123 9 is_stmt 1 view .LVU250
 853 0076 1149     		ldr	r1, .L64+12
 854 0078 4046     		mov	r0, r8
 855 007a FFF7FEFF 		bl	tcp_sent
 856              	.LVL95:
 125:Core/Src/lwip_tcp_server.c ****         tcp_server_handle_input(pcb, es);
 857              		.loc 1 125 9 view .LVU251
 858 007e 3146     		mov	r1, r6
 859 0080 4046     		mov	r0, r8
 860 0082 FFF7FEFF 		bl	tcp_server_handle_input
 861              	.LVL96:
 127:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 862              		.loc 1 127 9 view .LVU252
 127:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 863              		.loc 1 127 17 is_stmt 0 view .LVU253
 864 0086 2F46     		mov	r7, r5
 865 0088 EFE7     		b	.L49
 866              	.LVL97:
 867              	.L60:
 132:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 868              		.loc 1 132 9 is_stmt 1 view .LVU254
 132:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 869              		.loc 1 132 15 is_stmt 0 view .LVU255
 870 008a B068     		ldr	r0, [r6, #8]
 132:Core/Src/lwip_tcp_server.c ****         if (es->p == NULL)
 871              		.loc 1 132 12 view .LVU256
 872 008c 20B1     		cbz	r0, .L63
 873              	.LBB3:
 139:Core/Src/lwip_tcp_server.c ****             struct pbuf *ptr;
 874              		.loc 1 139 13 is_stmt 1 view .LVU257
 141:Core/Src/lwip_tcp_server.c ****             ptr = es->p;
 875              		.loc 1 141 13 view .LVU258
 876              	.LVL98:
 142:Core/Src/lwip_tcp_server.c ****             pbuf_chain(ptr, p);
 877              		.loc 1 142 13 view .LVU259
 878 008e 2146     		mov	r1, r4
 879 0090 FFF7FEFF 		bl	pbuf_chain
 880              	.LVL99:
 142:Core/Src/lwip_tcp_server.c ****             pbuf_chain(ptr, p);
 881              		.loc 1 142 13 is_stmt 0 view .LVU260
 882              	.LBE3:
 144:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 883              		.loc 1 144 17 view .LVU261
 884 0094 2F46     		mov	r7, r5
 885 0096 E8E7     		b	.L49
 886              	.L63:
 134:Core/Src/lwip_tcp_server.c ****             es->p = p;
 887              		.loc 1 134 13 is_stmt 1 view .LVU262
 134:Core/Src/lwip_tcp_server.c ****             es->p = p;
 888              		.loc 1 134 19 is_stmt 0 view .LVU263
 889 0098 B460     		str	r4, [r6, #8]
 135:Core/Src/lwip_tcp_server.c ****             tcp_server_handle_input(pcb, es);
 890              		.loc 1 135 13 is_stmt 1 view .LVU264
 891 009a 3146     		mov	r1, r6
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 25


 892 009c 4046     		mov	r0, r8
 893 009e FFF7FEFF 		bl	tcp_server_handle_input
 894              	.LVL100:
 144:Core/Src/lwip_tcp_server.c ****         ret_err = ERR_OK;
 895              		.loc 1 144 17 is_stmt 0 view .LVU265
 896 00a2 2F46     		mov	r7, r5
 897 00a4 E1E7     		b	.L49
 898              	.L61:
 149:Core/Src/lwip_tcp_server.c ****         if (p != NULL)
 899              		.loc 1 149 9 is_stmt 1 view .LVU266
 152:Core/Src/lwip_tcp_server.c ****             pbuf_free(p);
 900              		.loc 1 152 13 view .LVU267
 901 00a6 2046     		mov	r0, r4
 902 00a8 FFF7FEFF 		bl	pbuf_free
 903              	.LVL101:
 904 00ac DDE7     		b	.L49
 905              	.L65:
 906 00ae 00BF     		.align	2
 907              	.L64:
 908 00b0 00000000 		.word	.LC1
 909 00b4 1C000000 		.word	.LC2
 910 00b8 28000000 		.word	.LC3
 911 00bc 00000000 		.word	tcp_server_sent
 912              		.cfi_endproc
 913              	.LFE169:
 915              		.section	.text.tcp_server_init,"ax",%progbits
 916              		.align	1
 917              		.global	tcp_server_init
 918              		.syntax unified
 919              		.thumb
 920              		.thumb_func
 921              		.fpu fpv5-d16
 923              	tcp_server_init:
 924              	.LFB167:
   4:Core/Src/lwip_tcp_server.c ****     struct tcp_pcb *pcb;
 925              		.loc 1 4 1 view -0
 926              		.cfi_startproc
 927              		@ args = 0, pretend = 0, frame = 0
 928              		@ frame_needed = 0, uses_anonymous_args = 0
 929 0000 10B5     		push	{r4, lr}
 930              	.LCFI11:
 931              		.cfi_def_cfa_offset 8
 932              		.cfi_offset 4, -8
 933              		.cfi_offset 14, -4
   5:Core/Src/lwip_tcp_server.c ****     err_t err;
 934              		.loc 1 5 5 view .LVU269
   6:Core/Src/lwip_tcp_server.c **** 
 935              		.loc 1 6 5 view .LVU270
   9:Core/Src/lwip_tcp_server.c ****     pcb = tcp_new();
 936              		.loc 1 9 5 view .LVU271
   9:Core/Src/lwip_tcp_server.c ****     pcb = tcp_new();
 937              		.loc 1 9 11 is_stmt 0 view .LVU272
 938 0002 FFF7FEFF 		bl	tcp_new
 939              	.LVL102:
  11:Core/Src/lwip_tcp_server.c ****     if (pcb != NULL)
 940              		.loc 1 11 5 is_stmt 1 view .LVU273
  11:Core/Src/lwip_tcp_server.c ****     if (pcb != NULL)
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 26


 941              		.loc 1 11 8 is_stmt 0 view .LVU274
 942 0006 68B1     		cbz	r0, .L66
 943 0008 0446     		mov	r4, r0
  17:Core/Src/lwip_tcp_server.c ****         err = tcp_bind(pcb, IP4_ADDR_ANY, 8500);
 944              		.loc 1 17 9 is_stmt 1 view .LVU275
  17:Core/Src/lwip_tcp_server.c ****         err = tcp_bind(pcb, IP4_ADDR_ANY, 8500);
 945              		.loc 1 17 15 is_stmt 0 view .LVU276
 946 000a 42F23412 		movw	r2, #8500
 947 000e 0849     		ldr	r1, .L70
 948 0010 FFF7FEFF 		bl	tcp_bind
 949              	.LVL103:
  19:Core/Src/lwip_tcp_server.c ****         if (err == ERR_OK)
 950              		.loc 1 19 9 is_stmt 1 view .LVU277
  19:Core/Src/lwip_tcp_server.c ****         if (err == ERR_OK)
 951              		.loc 1 19 12 is_stmt 0 view .LVU278
 952 0014 38B9     		cbnz	r0, .L68
  22:Core/Src/lwip_tcp_server.c ****             pcb = tcp_listen(pcb);
 953              		.loc 1 22 13 is_stmt 1 view .LVU279
  22:Core/Src/lwip_tcp_server.c ****             pcb = tcp_listen(pcb);
 954              		.loc 1 22 19 is_stmt 0 view .LVU280
 955 0016 FF21     		movs	r1, #255
 956 0018 2046     		mov	r0, r4
 957              	.LVL104:
  22:Core/Src/lwip_tcp_server.c ****             pcb = tcp_listen(pcb);
 958              		.loc 1 22 19 view .LVU281
 959 001a FFF7FEFF 		bl	tcp_listen_with_backlog
 960              	.LVL105:
  25:Core/Src/lwip_tcp_server.c ****             tcp_accept(pcb, tcp_server_accept);
 961              		.loc 1 25 13 is_stmt 1 view .LVU282
 962 001e 0549     		ldr	r1, .L70+4
 963 0020 FFF7FEFF 		bl	tcp_accept
 964              	.LVL106:
 965              	.L66:
  33:Core/Src/lwip_tcp_server.c **** }
 966              		.loc 1 33 1 is_stmt 0 view .LVU283
 967 0024 10BD     		pop	{r4, pc}
 968              	.LVL107:
 969              	.L68:
  30:Core/Src/lwip_tcp_server.c ****             memp_free(MEMP_TCP_PCB, pcb);
 970              		.loc 1 30 13 is_stmt 1 view .LVU284
 971 0026 2146     		mov	r1, r4
 972 0028 0120     		movs	r0, #1
 973              	.LVL108:
  30:Core/Src/lwip_tcp_server.c ****             memp_free(MEMP_TCP_PCB, pcb);
 974              		.loc 1 30 13 is_stmt 0 view .LVU285
 975 002a FFF7FEFF 		bl	memp_free
 976              	.LVL109:
  33:Core/Src/lwip_tcp_server.c **** }
 977              		.loc 1 33 1 view .LVU286
 978 002e F9E7     		b	.L66
 979              	.L71:
 980              		.align	2
 981              	.L70:
 982 0030 00000000 		.word	ip_addr_any
 983 0034 00000000 		.word	tcp_server_accept
 984              		.cfi_endproc
 985              	.LFE167:
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 27


 987              		.text
 988              	.Letext0:
 989              		.file 2 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/machine/_de
 990              		.file 3 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_stdint
 991              		.file 4 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 992              		.file 5 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 993              		.file 6 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 994              		.file 7 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 995              		.file 8 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 996              		.file 9 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 997              		.file 10 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 998              		.file 11 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 999              		.file 12 "Core/Inc/lwip_tcp_server.h"
 1000              		.file 13 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/string.h"
 1001              		.file 14 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdio.h"
 1002              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/mem.h"
 1003              		.file 16 "<built-in>"
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 28


DEFINED SYMBOLS
                            *ABS*:0000000000000000 lwip_tcp_server.c
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:17     .text.tcp_server_accept:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:24     .text.tcp_server_accept:0000000000000000 tcp_server_accept
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:117    .text.tcp_server_accept:000000000000004c $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:716    .text.tcp_server_recv:0000000000000000 tcp_server_recv
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:250    .text.tcp_server_error:0000000000000000 tcp_server_error
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:361    .text.tcp_server_poll:0000000000000000 tcp_server_poll
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:124    .text.tcp_server_send:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:130    .text.tcp_server_send:0000000000000000 tcp_server_send
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:244    .text.tcp_server_error:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:286    .text.tcp_server_close:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:292    .text.tcp_server_close:0000000000000000 tcp_server_close
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:355    .text.tcp_server_poll:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:453    .text.tcp_server_poll:0000000000000044 $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:464    .text.tcp_server_sent:0000000000000000 tcp_server_sent
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:458    .text.tcp_server_sent:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:535    .text.tcp_server_sent:0000000000000034 $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:540    .rodata.tcp_server_handle_input.str1.4:0000000000000000 $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:544    .text.tcp_server_handle_input:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:550    .text.tcp_server_handle_input:0000000000000000 tcp_server_handle_input
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:695    .text.tcp_server_handle_input:000000000000008c $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:700    .rodata.tcp_server_recv.str1.4:0000000000000000 $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:710    .text.tcp_server_recv:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:908    .text.tcp_server_recv:00000000000000b0 $d
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:916    .text.tcp_server_init:0000000000000000 $t
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:923    .text.tcp_server_init:0000000000000000 tcp_server_init
/var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s:982    .text.tcp_server_init:0000000000000030 $d

UNDEFINED SYMBOLS
tcp_setprio
mem_malloc
tcp_arg
tcp_recv
tcp_err
tcp_poll
pbuf_ref
pbuf_free
tcp_recved
tcp_write
mem_free
tcp_sent
tcp_close
tcp_abort
ip4addr_ntoa
memset
strncpy
sprintf
strcat
strlen
printf
pbuf_chain
tcp_new
tcp_bind
tcp_listen_with_backlog
tcp_accept
memp_free
ARM GAS  /var/folders/bg/n1lwdyp56391g865_v8nrmhm0000gn/T//ccdX8oaP.s 			page 29


ip_addr_any
